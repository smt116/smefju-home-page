<!DOCTYPE html>
<html>
  <head>
    <title>RethinkDB</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(http://fonts.googleapis.com/css?family=Droid+Serif&subset=latin,latin-ext);
      @import url(http://fonts.googleapis.com/css?family=Wellfleet&subset=latin,latin-ext);

      body {
        font-size: 1.4em;
        font-family: 'Droid Serif';
      }
      pre { font-size: 1.2em; }
      h1, h2, h3, .corner-title {
        font-family: 'Wellfleet';
      }
      h1, h2, h3 {
        font-weight: 400;
        margin-bottom: 0;
      }
      h1 { font-size: 3.5em; }
      h2 { font-size: 2em; }
      h3 { font-size: 1.6em; }
      li p { line-height: 1.25em; }

      .corner-title {
        position: absolute;
        bottom: 30px;
        left: 30px;
        color: #666;
        font-size: 36px;
      }

      .remark-slide-content.smaller-fonts { padding: 0; }
      .smaller-fonts .remark-code { font-size: 0.8em; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# RethinkDB
### Maciej Małecki

smt116@gmail.com

---

class: center, middle

### *"An open-source distributed database built with love."*
###### rethinkdb.com

---

class: center, middle

## Simple programming model

---

class: middle

.corner-title[Simple programming model]
### JSON data model

```json
{
  name: 'House M.D.',
  episodes: {
    {
      id: 1,
      date: {
        day: 16,
        month: 11,
        year: 2004
      }
    },
    ...
  }
}
```

---

class: middle

.corner-title[Simple programming model]
### Table joins, group by

---

class: middle

.corner-title[Simple programming model]
### Aggregations, map-reduce

---

class: middle

.corner-title[Simple programming model]
### Indexes...

* simple
* compound
* multi
* build with arbitrary expressions

---

class: center, middle

## Easy administration

---

class: middle

.corner-title[Easy administration]
### Web and command-line tools for administrating

---

class: middle

.corner-title[Easy administration]
### Support for multi-datacenter replication and failover

---

class: center, middle

## Horizontal scalability

---

class: middle

.corner-title[Horizontal scalability]
### Replication to multiple nodes

---

class: middle

.corner-title[Horizontal scalability]
### Auto parallelized for queries

---

class: middle

.corner-title[Horizontal scalability]
### Lock-free operation via MVCC concurrency.

---

class: center, middle

## Installation

http://www.rethinkdb.com/docs/install/

---

class: middle, smaller-fonts

##.center[Running the server]

```bash
~/repos/smefju-home-page/presentations/rethinkdb
 $ rethinkdb 
 info: Running rethinkdb 1.11.2-0ubuntu1~saucy (GCC 4.8.1)...
 info: Running on Linux 3.11.0-12-generic x86_64
 info: Loading data from directory /home/smefju/tmp/rethinkdb/rethinkdb_data
 info: Listening for intracluster connections on port 29015
 info: Listening for client driver connections on port 28015
 info: Listening for administrative HTTP connections on port 8080
 info: Listening on addresses: 127.0.0.1, 127.0.1.1, ::1
 info: To fully expose RethinkDB on the network, bind to all addresses
 info: by running rethinkdb with the `--bind all` command line option.
 info: Server ready
```

---

class: center, middle

## Web UI

http://localhost:8080/

---

class: center, middle

## ReQL

[cheat sheet](http://www.rethinkdb.com/docs/sql-to-reql/)

---

class: center, middle

## Data modeling
##### Blog has the authors, the authors have posts.
http://www.rethinkdb.com/docs/data-modeling/

---

class: center, middle

### Embedded arrays vs multiple tables

---

class: center, middle

.corner-title[Data modeling]
### Embedded arrays

---

class: middle
.corner-title[Data modeling - embedded arrays]

```json
# authors table
{
  id: 123,
  name: "Maciek",
  posts: [
    { title: "Introduction to RethinkDB" },
    { title: "Neo4j as a graph Database" },
    ...
  ]
}
```

```ruby
# Retrieve all authors with their posts
r.db("blog").table("authors")

# Retrieve a single author with his posts
r.db("blog").table("authors").get(ID)
```
---

class: center, middle

.corner-title[Data modeling]
### Multiple tables

---

class: middle
.corner-title[Data modeling - multiple tables]

```json
# authors table
{
  id: 123
  name: "Maciek"
}

# posts table
{
  id: 1,
  authors_id: 123
  title: "Introduction to RethinkDB"
},
{
  id: 2,
  authors_id: 123,
  title: "Neo4j as a graph Database"
}
```

---

class: middle
.corner-title[Data modeling - multiple tables]

```ruby
# with a secondary index on the `authors_id` field
# in the `posts` table
r.db("blog").table("posts").
  getAll(123, {index: "authors_id"})

# without a secondary index
r.db("blog").table("posts").
  filter({"authors_id": 123})

# with a secondary index on the `authors_id` field
# in the `posts` table
r.db('blog').table('authors').getAll(123).eqJoin(
  'id',
  r.db('blog').table('posts'),
  {
    index:'authors_id'
  }
).zip()
```

---

class: center, middle

## Drivers

http://www.rethinkdb.com/docs/install-drivers/

---

class: middle

## Ruby

```bash
 $ gem install rethinkdb
Fetching: ruby-protocol-buffers-1.5.1.gem (100%)
Successfully installed ruby-protocol-buffers-1.5.1
Fetching: rethinkdb-1.11.0.1.gem (100%)
Successfully installed rethinkdb-1.11.0.1
2 gems installed
```

---

class: middle

```ruby
require 'rubygems'
require 'rethinkdb'

include RethinkDB::Shortcuts

r.connect(host: 'localhost', port: 28015).repl
db = r.dbCreate('ruby_test')
db.table_create('students').run
db.table('students').insert({
  name:   'Maciek',
  index:  194930
}).run

db.table('students').run
```

---

class: center, middle

## Pastie
#### using RethinkDB and Sinatra

https://github.com/rethinkdb/rethinkdb-example-sinatra-pastie

---

class: center, middle

## Start a cluster

http://www.rethinkdb.com/docs/start-a-cluster/

---

class: center, middle

## RethinkDB vs MongoDB

http://www.rethinkdb.com/docs/comparison-tables/

---

class: center, middle

## The future

http://www.rethinkdb.com/blog/funding/

---

class: center, middle

### Maciej Małecki

smt116@gmail.com

    </textarea>
    <script src="http://gnab.github.io/remark/downloads/remark-0.5.9.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
